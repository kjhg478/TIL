## LexicalScope

- 렉시컬 스코프

  - 스코프는 엔진이 확인자 이름으로 현재 스코프 또는 중첩 스코프내에서 변수를 찾을 때 사용하는 '규칙의 집합'이다.
  - 렉시컬 스코프는 어떤 함수가 어디서 또는 어떻게 호출되는지에 상관없이 함수의 렉시컬 스코프는 함수가 선언된 위치에 따라 정의된다.
  - 여기서 스코프는 두 가지 방식으로 작동한다.
    1. 다른 방식보다 훨씬 더 일반적이고 다수의 프로그래밍 언어가 사용하는 방식 (Lexical Scope)
    2. Bash Scripting이나 Perl의 일부 모드와 같은 몇몇 언어에서 사용하는 방식으로 동적 스코프(Dynamic Scope)라고 부른다.

- 렉스타임
  - 렉시컬 스코프는 렉싱 타임에 정의되는 스코프다.
  - 렉시컬 스코프는 개발자가 코드를 짤 때 변수와 스코프 블록을 어디서 작성하는가에 기초해서 렉서가 코드를 처리할 때 확정된다.

```Javascript

function foo(a) {
    var b = a * 2;
    function bar(c) {
        console.log(a, b, c);
    }
    bar(b * 3);
}
foo(2); // 2, 4, 12

```

- 검색
  - 엔진은 스코프 버블의 구조와 상대적 위치를 통해 어디를 검색해야 확인자를 찾을 수 있는지 안다.
  - 스코프는 목표와 일치하는 대상을 찾는 즉시 검색을 중단한다.
  - 여러 중첩 스코프 층에 걸쳐 같은 확인자 이름을 정의할 수 있다. 이를 섀도잉이라 한다. (더 안쪽의 확인자가 더 바깥쪽의 확인자를 가리는 것)
  - 섀도잉과 상관없이 스코프 검색은 항상 실행 시점에서 가장 안쪽 스코프에서 시작하여 최초 목표와 일치하는 대상을 찾으면 멈추고, 그전까지 바깥/위로 올라가면서 수행한다.

#### 정리

    - 렉시컬 스코프란 개발자가 코드를 작성할 때 함수를 어디에 선언하는지에 따라 정의되는 스코프를 말한다.

- 추가

```Javascript

var x = 1; // global

function first() {
  var x = 10;
  second();
}

function second() {
  console.log(x);
}

first(); // 1
second(); // 1

```

- JS에서 위와 같은 코드를 실행할 때, 이미 실행 단계에서 코드들의 스코프를 결정한다.

  - golbal 범위에 있는 변수 x
  - first() 함수 안에 있는 변수 x
  - second() 함수 안에 있는 변수 x
  - 위 예제의 실행 결과는 함수 second()의 상위 스코프가 무엇인지에 따라 결정된다.
  - JS는 렉시컬 스코프를 따르므로 함수를 선언한 시점에 상위 스코프가 결정된다.
  - 즉, 어디서 함수를 호출했는지는 스코프 결정에 아무런 영향을 주지 않는다.

- 정리해보자

  - second() 함수가 first() 함수 안에서 호출된 것과 상관없이 second() 함수는 global 범위에 선언되어 있으므로, global 범위에 있는 변수 x의 값 1이 두 번 출력된 것이다.

- 출처 : https://ljtaek2.tistory.com/145
